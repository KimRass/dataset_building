# 한국어 대화
- 한국어 챗봇을 학습시키기 위한 한국어 구어체 문장을 구축하는 프로젝트였습니다.
- 특이점으로는 영화 등에 등장하는 명대사와 명대사의 전후에 들어가 이어지는 문장을 구축한다는 점이었습니다.
- Examples
  |구축 문장 A|명대사|구축 문장 B|
  |-|-|-|
  |피곤하다 보니깐 계속 미루는 습관이 생긴 것 같아.|"나중에"라고 외칠때마다 생의 불꽃은 하나씩 꺼지는 법이랬어.|맞아, 할 일을 미루면 안 되는데.|
  |목표를 위해서 너무 안 쉬고 달렸나봐. 갑자기 뇌가 멈추는 느낌이 들더라고.|가끔은 멈출 줄도 알아야 해.|그러게. 번아웃 오기 전에 적당히 할 걸. 지금이라도 좀 쉬어야겠어.|
## 수작업 최소화
- 기계적으로 체크할 수 있는 부분을 최대한 체크하여 수동으로 문장을 확인하는 데 드는 시간과 노력을 최소하하고자 했습니다. 이를 위해 다음과 같이 유형별로 다르게 표시하여 작업자에게 전달했습니다.
- 이중밑줄
  - 맞춤법 수정 등 문장 수정 발생 (e.g., "꺠닫게 되었달까." → "깨닫게 되었달까.")
  - 특정 단어가 포함된 문장
  - 알파벳이 포함된 이모티콘 (e.g., "T^T")
  - 혐오 표현
- 빨간색 셀
  - 두 문장이 서로 Semantic similarity가 높은 경우 (Cosine similarity 0.75 이상)
- 파란색 폰트
  - 반말을 존댓말로 변환
- 볼드체
  - 명대사의 일부를 인용한 문장
## 명대사의 일부를 인용한 문장
- 명대사에 포함된 단어를 그대로 사용하여 문장을 구성하는 것이 아니라, 그 명대사는 비유적인 표현일 뿐으로 아예 다른 맥락의 문장을 구성해야 하는 것이 고객사의 조건 중 하나였습니다.
- 명대사의 일부를 인용한 문장의 예는 다음과 같습니다.
  - 명대사: "가끔 진지하게 생각해. 내 목숨을 어떤 일에 쓰게 될지." / 다음 문장: "네 목숨은 너의 행복을 위해 써야 해. 그것보다 중요한 건 없어."
  - 명대사: "공부에 흥미를 붙이려면 우선 좋은 점수를 받아야 해." / 다음 문장: "재미가 없는데 재미를 붙이기 위해 공부를 해야 한다니."
- 이를 판별하기 위해 `kiwipiepy`를 사용한 형태소 분리 기반의 알고리즘을 구성했습니다. 자세히 설명하면 다음과 같습니다.
  1. 두 개의 문장을 각각 형태소 단위로 분리합니다. 이때 관심 있는 형태소는 일반명사, 고유명사, 동사 ("하", "되" 제외), 형용사, 어근, 알파벳, 한자, 숫자로 한정합니다.
  2. 두 문장에서 공통으로 등장하는 단어의 개수가 2개 이상이면 서로를 인용한 문장으로 판별합니다.
## Semantic Textual Similarity
- 한국어에 대해 Embedding 성능이 우수한 Sentence BERT 모델을 사용하여 유사도를 계산했습니다.
- e.g., "요즘 너무 지친다. 좀 오랫동안 쉬고 싶어.", "요즘 너무 지쳐서 휴식이 필요한 거 같아."
## 반말 → 존댓말 변환
- 사용한 라이브러리: `kiwipiepy`
- Process: 형태소 분석 → 반말을 만드는 형태소를 존댓말에 해당하는 형태소로 변환 → 분리된 형태소를 합쳐 문장으로 복원
### 형태소 변환
- 형태소와 형태소를 나타내는 태그 사이를 `"ᴥ"` 기호로 연결
- 형태소 + 태그 쌍을 서로 구분하기 위한 기호로 `"|"` 사용
- Examples
  - 부탁드립니다 → 부탁해 (`"|부탁ᴥNNG|드리ᴥVV|ᆸ니다ᴥEF|": "|부탁ᴥNNG|하ᴥXSV|어ᴥEF|"`)
  - 옵니다 → 와 (`"|오ᴥEP|ᆸ니다ᴥEF|": "|어ᴥEF|"`)
  - ~할까요 → ~할까 (`"|ᆯ까요ᴥEF|": "|ᆯ까ᴥEF|"`)
  - 재밌으시네요 → 재밌네 (`"|으시ᴥEP|": "|"`, `"|요ᴥJX|": "|"`)
